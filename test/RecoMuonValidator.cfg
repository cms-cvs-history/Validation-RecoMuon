process ANAL = {

    source = PoolSource {
        untracked vstring fileNames = { }
    }
    replace PoolSource.fileNames = {
	'/store/relval/2008/5/20/RelVal-RelValSingleMuPt1000-1211209682-FakeConditions-2nd/0000/00CEFD50-5626-DD11-8BD6-000423D6CA72.root',
	'/store/relval/2008/5/20/RelVal-RelValSingleMuPt1000-1211209682-FakeConditions-2nd/0000/02A4FE74-5426-DD11-B73C-001617C3B66C.root'
    }
    
    untracked PSet maxEvents = {untracked int32 input = -1}

    service = MessageLogger
    {
	untracked vstring destinations = { "cout" }
	untracked vstring categories     = { "RecoMuonValidator" }
	untracked vstring debugModules   = { "recoMuonValidation" }
	untracked PSet cout = {
            untracked string threshold = "DEBUG"
            untracked bool noLineBreaks = true
            untracked bool noTimeStamps = true
            untracked PSet preEventProcessing = { untracked int32 limit = 0 }
            untracked PSet FwkReport = { untracked int32 limit = 0 }
            untracked PSet FwkJob    = { untracked int32 limit = 0 }
            untracked PSet default   = { untracked int32 limit = 0 }
            untracked PSet RecoMuonValidator = { untracked int32 limit = -1}
	}
    }
    
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cff" 
    include "Geometry/CommonDetUnit/data/globalTrackingGeometry.cfi"
    include "RecoMuon/DetLayers/data/muonDetLayerGeometry.cfi"
    
    include "RecoMuon/TrackingTools/data/MuonServiceProxy.cff"
    
    // Muon validation with MultiTrackAnalyzer
    include "SimTracker/TrackAssociation/data/TrackAssociatorByChi2.cfi"
    include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"
    include "SimTracker/TrackAssociation/data/TrackAssociatorByPosition.cff"
    
    # Track and Particle Collections
    include "Validation/RecoTrack/data/cuts.cff"
    //include "Validation/RecoMuon/data/MuonSeedTrack.cff"
    include "Validation/RecoTrack/data/cutsTPEffic.cfi"
    module cutsTPEfficMu = cutsTPEffic from "Validation/RecoTrack/data/cutsTPEffic.cfi"
    replace cutsTPEfficMu.pdgId += 13
    replace cutsTPEfficMu.pdgId += -13
    
    include "Validation/RecoTrack/data/cutsTPFake.cfi"
    module cutsTPFakeMu = cutsTPFake from "Validation/RecoTrack/data/cutsTPFake.cfi"
    replace cutsTPFakeMu.pdgId += 13
    es_module TrackAssociatorByDeltaR = TrackAssociatorByPosition from "SimTracker/TrackAssociation/data/TrackAssociatorByPosition.cfi"
    replace TrackAssociatorByDeltaR.ComponentName = "TrackAssociatorByDeltaR"
    replace TrackAssociatorByDeltaR.method = "posdr"
    replace TrackAssociatorByDeltaR.QminCut = 120
    replace TrackAssociatorByDeltaR.QCut = 0.1
    
    include "Validation/RecoTrack/data/MultiTrackValidator.cff"
    replace multiTrackValidator.associators = {"TrackAssociatorByHits"}
    replace multiTrackValidator.label = {ctfWithMaterialTracks}
    module multiTrackValidatorMu = multiTrackValidator from "Validation/RecoTrack/data/MultiTrackValidator.cfi"
    replace multiTrackValidatorMu.out = ""
    replace multiTrackValidatorMu.associators = {"TrackAssociatorByHits","TrackAssociatorByPosition","TrackAssociatorByDeltaR"}
    replace multiTrackValidatorMu.label = {cutsCKF,globalMuons,standAloneMuons,standAloneMuons:UpdatedAtVtx}
    replace multiTrackValidatorMu.label_tp_effic = cutsTPEfficMu
    replace multiTrackValidatorMu.label_tp_fake = cutsTPFakeMu

//    service = DQMStore{ }

    include "Validation/RecoMuon/data/RecoMuonValidators.cff"

    replace recoMuonValidation.outputFileName = "validation.root"
    replace recoMuonValidation.SimPtcl = "cutsTPEfficMu"

    replace recoMuonValidation.StaMuonHistoParameters.wErrQOverPt = 3
    replace recoMuonValidation.GlbMuonHistoParameters.wErrQOverPt = 2

    path p = {cutsTPEfficMu, recoMuonValidation}

}
